<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบจัดการการบ้าน</title>
    <style>
        /* Your CSS styles here */
    </style>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/9.20.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.20.0/firebase-database-compat.js"></script>
    <!-- Initialize Firebase -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAhpq4LyinAVcxQFDzNHShL-K1Ga9QrGpA",
            authDomain: "homework-management-f90a9.firebaseapp.com",
            projectId: "homework-management-f90a9",
            storageBucket: "homework-management-f90a9.appspot.com",
            messagingSenderId: "417589049621",
            appId: "1:417589049621:web:b9fc88855a99bcc817111c",
            databaseURL: "https://homework-management-f90a9-default-rtdb.asia-southeast1.firebasedatabase.app/"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <h1>ระบบจัดการการบ้าน</h1>
    
    <h2>เพิ่มการบ้านใหม่</h2>
    <form id="homeworkForm">
        <input type="text" id="subject" placeholder="วิชา" required>
        <input type="datetime-local" id="dueDate" required>
        <textarea id="details" placeholder="รายละเอียดการบ้าน" required></textarea>
        <button type="submit">เพิ่มการบ้าน</button>
    </form>

    <h2>รายการงานที่ค้างอยู่</h2>
    <ul id="homeworkList">
        <!-- รายการงานจะถูกเพิ่มที่นี่ -->
    </ul>

    <script>
        document.getElementById('homeworkForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const subject = document.getElementById('subject').value;
            const dueDate = document.getElementById('dueDate').value;
            const details = document.getElementById('details').value;

            const homeworkItem = {
                subject: subject,
                dueDate: new Date(dueDate).toLocaleString(),
                details: details
            };

            // Save to Firebase
            firebase.database().ref('homeworkList').push(homeworkItem);

            // Clear form fields
            document.getElementById('subject').value = '';
            document.getElementById('dueDate').value = '';
            document.getElementById('details').value = '';
        });

        function addHomeworkToList(homeworkItem) {
            const li = document.createElement('li');
            li.textContent = `วิชา: ${homeworkItem.subject}, วันครบกำหนด: ${homeworkItem.dueDate}, รายละเอียด: ${homeworkItem.details}`;

            const completeBtn = document.createElement('button');
            completeBtn.textContent = 'ทำเสร็จแล้ว';
            completeBtn.className = 'complete-btn';
            completeBtn.onclick = function() {
                li.remove();
            };

            li.appendChild(completeBtn);
            document.getElementById('homeworkList').appendChild(li);
        }

        // Load existing homework items
        firebase.database().ref('homeworkList').on('value', function(snapshot) {
            document.getElementById('homeworkList').innerHTML = '';
            snapshot.forEach(function(childSnapshot) {
                addHomeworkToList(childSnapshot.val());
            });
        });
    </script>
</body>
</html>
